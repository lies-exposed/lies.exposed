name: Setup Workspace
description: Checkout, install deps, and build packages

inputs:
  hash:
    required: true
    description: "The hash obtained from hashFiles('**/pnpm-lock.yaml')"
  build_hash:
    required: true
    description: "The hash for build packages cache (usually github.sha)"

runs:
  using: "composite"
  steps:
    - uses: ./.github/actions/install-deps
      with:
        hash: ${{ inputs.hash }}

    - uses: ./.github/actions/build-packages
      with:
        hash: ${{ inputs.build_hash }}

