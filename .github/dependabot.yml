---
version: 2
updates:
  # GitHub Actions dependencies
  - package-ecosystem: "github-actions"
    directories:
      - "/"
      - "/.github/actions/*"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 5
    target-branch: "main"

  # npm – single root entry so pnpm-lock.yaml covers all workspace packages.
  # Listing individual workspace directories alongside "/" causes Dependabot to
  # open one PR per directory for every shared dependency (e.g. react-dropzone
  # would get a PR for "/" AND "/packages/@liexp/ui"). Groups also only apply
  # within a single directory block, so keeping everything under "/" is required
  # for cross-workspace grouping (e.g. storybook, eslint) to work properly.
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "weekly"
    open-pull-requests-limit: 15
    target-branch: "main"
    versioning-strategy: increase
    allow:
      - dependency-type: "direct"
    ignore:
      # Internal workspace packages – never updated by Dependabot
      - dependency-name: "@liexp/*"
      # Pinned external deps – not ready for these majors yet
      - dependency-name: "@types/express"
        versions: ["5.x"]
      - dependency-name: "@types/mime"
        versions: ["2.x", "3.x", "4.x"]
      - dependency-name: "fast-check"
        versions: ["4.x"]
      - dependency-name: "query-string"
        versions: ["8.x", "9.x"]
      - dependency-name: react
        versions: ["19.x"]
      - dependency-name: react-dom
        versions: ["19.x"]
      - dependency-name: "@types/node"
        versions: ["25.x"]
      - dependency-name: "@types/react"
        versions: ["19.x"]
      - dependency-name: "@types/react-dom"
        versions: ["19.x"]
    groups:
      aws-sdk:
        patterns:
          - "@aws-sdk/*"
      blocknote:
        patterns:
          - "@blocknote/*"
      langchain:
        patterns:
          - "@langchain/*"
          - "langchain"
      vite:
        patterns:
          - "@vitejs/*"
          - "vite*"
      eslint:
        patterns:
          - "@typescript-eslint/*"
          - "typescript-eslint*"
          - "@eslint/*"
          - "eslint*"
          - "eslint"
      mui:
        patterns:
          - "*mui*"
      react-admin:
        patterns:
          - "ra-*"
          - "react-admin"
      react-router:
        patterns:
          - "react-router*"
      storybook:
        patterns:
          - "@storybook/*"
          - "storybook"
      visx:
        patterns:
          - "*visx*"
