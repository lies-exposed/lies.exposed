---
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"
    open-pull-requests-limit: 10
    target-branch: "daily"
    versioning-strategy: increase-if-necessary
    allow:
      # Allow both direct and indirect updates for all packages
      - dependency-type: "all"
    ignore:
      - dependency-name: "@types/mime"
        versions: ["2.x", "3.x"]
      - dependency-name: "fast-check"
        versions: ["3.x"]
      - dependency-name: "query-string"
        versions: ["8.x"]
    groups:
      production-dependencies:
        dependency-type: "production"
        exclude-patterns:
          - "@aws-sdk/*"
          - "ra-*"
          - "react-core"
          - "react-admin"
          - "*visx*"
          - "*mui*"

      development-dependencies:
        dependency-type: "development"
        exclude-patterns:
          - "*vite*"
          - "@types/*"
          - "@typescript-eslint/*"
          - "typescript-eslint*"
          - "eslint*"
          - "*uuid"

      aws-sdk:
        patterns:
          - "@aws-sdk/*"
      vite:
        patterns:
          - "*vite*"
      eslint:
        patterns:
          - "@typescript-eslint/*"
          - "typescript-eslint*"
          - "eslint*"

  - package-ecosystem: "npm"
    directory: "/packages/@liexp/core"
    schedule:
      interval: "daily"
    target-branch: "daily"
    open-pull-requests-limit: 5
    versioning-strategy: increase-if-necessary
    groups:
      uuid:
        patterns:
          - "*uuid"
          - "uuid"

  - package-ecosystem: "npm"
    directory: "/packages/@liexp/shared"
    schedule:
      interval: "daily"
    target-branch: "daily"
    open-pull-requests-limit: 5
    versioning-strategy: increase-if-necessary
    groups:
      uuid:
        patterns:
          - "*uuid"
          - "uuid"

  - package-ecosystem: "npm"
    directory: "/packages/@liexp/ui"
    schedule:
      interval: "daily"
    open-pull-requests-limit: 5
    target-branch: "daily"
    versioning-strategy: increase-if-necessary
    groups:
      mui:
        patterns:
          - "*mui*"
      react-admin:
        patterns:
          - "ra-*"
          - "react-core"
          - "react-admin"
      visx:
        patterns:
          - "*visx*"


  - package-ecosystem: "npm"
    directory: "/services/api"
    schedule:
      interval: "daily"
    open-pull-requests-limit: 5
    target-branch: "daily"
    versioning-strategy: increase-if-necessary

  - package-ecosystem: "npm"
    directory: "/services/web"
    schedule:
      interval: "daily"
    open-pull-requests-limit: 5
    target-branch: "daily"
    versioning-strategy: increase-if-necessary

  - package-ecosystem: "npm"
    directory: "/services/admin-web"
    schedule:
      interval: "daily"
    open-pull-requests-limit: 5
    target-branch: "daily"
    versioning-strategy: increase-if-necessary
    groups:
      react-admin:
        patterns:
          - "ra-*"
          - "react-core"
          - "react-admin"